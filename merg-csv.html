<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Merger Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAxlBMVEX////Y3+Mfs1uvvccZgEMAr0/j9usXsljF29Xg4uru8fPW3uLb4OW618wzuGpJu3cstWF1zZaq0r9cv4MOsVTH1dQAfDnS3t+Kyqebz7Tk8ekAdi4AsE52xpequcTI29eCyaBuw5A0jVen0r3CzdSy1cZhwIdDunOHyaMZhUV7xpqUza5SvX3x9PXN1ty4xc3I3tFyqoYAcyPZ6N9Ml2iqyrVgonkohEsrkVMpn1cYlEseqlee2bOH0qK248bb8+Wb2LC85cvMaqWHAAAJcElEQVR4nO2dfX+aOhTHhS5NUwM6zS3QYZU5q1Pb3d2n3T3fvf83dZEkSASRtCahfPL7a7NR8vXknJycBOz1rKysrKysrKysrKysrKysqvVwrV7YHN6101cvp393Z4gx5XN0qH9xcXdtBFAPX0Z48aHLgBnhxTvtgA/aACnhnaObEGsDpIQXF5pdUaMJOaFmV7zWB8gJNbuixkGaE+p1Rax/lGqeFU3YUK8rmiHU6YqGCDW6oiFCja5oivDiovuEulzRHKGutaI5Ql2uaJBQkysaJdTiikYJtbiiUUItrmiWUIcrmiZU74qmCdW7omlC9WUb84SqXbEFhIpdsQWEiteKLSBUPCu2gVCtK7aDUKUrtoNQpSu2g1ClK7aEUKErtoZQmSvqJHQ+1BAqc0WthO/qjKjKFbUSPt7VISpyRa2ETi2gIlesJ8SyOkH4WEuoxhVr+4Smi5GMFtNTiO9qx6kSV6zrEg5hDKQE1ycR6weqXkI8il1ZxZvTA7XGjHcKXLGO8J5IE8Ll6dD1WDct6iUcQ3lCv0lw7vcfj0kv4QpIE5LkmdOPXsJgCaCcgH8ymraJMB1N4f1YSqvguRmEZkKMJHVyym8boQFZQktoCc3LElpCS2heltASyhJKV6KeXazSTIgC7+yaotpL6iXEkStZiTqtmKzbY0O8APJljNMCK9QWQvSESlQDQb9fc1GthE+pRDUhHNYVAvQSzuQrUQ1EtnW+r5cw8GUrUQ1EiNcaQgf3Z4OzK6mvxuklTCd82VJUA9Vd0GZtltAStkGW0BJaQvOyhJbQEpbU9UoUxldnV78+9dZLiOdufHaBVXtWT4oqUfXHprQSokRNJWpZ97ARrYTdr0ShmRobtqgSNR0SFZWohQbC271qLpYiTvyz67621HYOwt8/3rzZ64/faqcLBYWo+o2Z5xP++debm1cF3dQSGtBzARc3Al/3CBdvXr3qNOHtIV/nCD/edJzwoTRGu0b4d9mEHSP8p/OEb8uAHSP81HnC7tvw384Tfu484bD7hF86T+i+7zoh/Np5QvfroRU7R+i6X0qErdIZCN2vn7+8T/WW6pN3/p2JZ+mS6vYZhKXyZTvlLr/JU1YTtlWQxN+7TZgK+JJmfHGELpREfHmELtl2ndCNf3SdEPpdJ3Tjn10nBDLD9EUSEplJ8WUSvraElrDtsoSW8JQgoTr+Tt6iohmseV/d3wQpJSTxcLxehWG4mmxdUHV6CAJIW2RaTZZxoRXxZ6vxkbvfyHAdjhudR1JHCIE78/oYZdUThPuLpMxIhpuAtWDNrpL8sB8Z9xFCUeUD0eAgSP82b4KojJD4ES4+MSjtfpAcDCyQOIfnYTHyfNZvenqt+vQfye5fQ+sGiKoI40n5dB1Gi2GxSyCsOvyDg2XWCI6zk7LYqxin/G+LBndwqiGEJKo8uYSmyz0imVQf9sVBdh1G4TjL8lVjerLNHCGEiyMnlbmB3OyU6JFaMhplbdgZS7QpYfCn1jU6+6iEkIxyQJwFkr1DMgPtGs0RH7yFei7t+XbXBkSIvaP0+SE1Yb9Jh1QQgg0HxGg62qxmq80i4KMWLWhwhL5DX8FeOGOKmO/i+c5scMAsVYo1cMqaGYql+QHXNC6O02kw03DGxyTrMEno14DXIJ/vgUsPVmIn+xYA+9/iAITcs7dum/RHBeEVH5JJnL8BEtZ7B0+zF0lEuy88ABS6zGw+LHwJ9H+FPrM4c2Voxs+NEwyEHkDoFUcdmNM4MhEaMbNRR3RJvyrW8DiDm8yGSgi5rQ6TKuhTN8NekfBe+EywKBICZudA+CQS0gjklCKQHkK4ZCYsB3kyKwRHTiiGESIQ8s8SG8Xsi5o3e2DD2QlzjKq2Wd/wNGvH7DMX8k7CuJnnsfEg5DWQxRk0MLS2ACN8xIScHm12FuHu6myLDdNEJn074kR5owIN4HGm4TM3zk4YXxXH2eHVNrvVAh2BPF4E6+JKj0wclCbf/IVyXsMf3dIo61ZDyMbQkcsNBzz5JiOGiIKNT/LuEjjw98Q8r5nuPyHkztw0wTq7H9IO9I99w/sZcpBncqnVkmG+LoSFq1TkNVOpOKMilqKKAF996c0+Pd8ZchBXvAccxJo8n2l8S5VBwnRqKKxA0vzbS8q1F77EyqPrSCafMU2YzonCKhKj/sY/ZOR5TZQZEfoMuGmcMUzogmR6wIhHS/Gd+RqK5nEha96UzzRhGjknnngjE3YSMQsdMMej2axcPtMCwrQDxI+EehRGa6H7eV5D9nGmaT7TCsJd2ZFMPGdvSCzm7PlaJaUCUusmRYSN50O3MPMRMIjyKkAKIFwnz2sIL+1IxBmFOU1107STkI9BCPzCNE+GiZdXOoS1RB5rduVH+i+/+SBVQEhzjmpPAWGav2zYzDaeFjPQnSGXc166EbLxZZ7XyOYzSgjZ2qKiBphebJ2tLUJC+71bRQgeBeOQjQBhFMY81mxl6jPKCMmqal3OCMrrQyTWe9lsIL6axxpPbt2kiDBf45d/vYOacOdGbrMqRv6ZQu1Y8h54ZXUa7AwOOsIfFIA9KElIomIJHcvt8SkgnPBam5h/QX4bPS2vVddpxFpb/tZBMSOQijNqat5XfPU+jguRku9lsNVsZZ1GrJcWelm4Bb+6eqCVkPBNI4zSNJpWtAFM+G4bq5Dm4SOJC7vczMz4YFu0sE1Fx7hZQjfO3Qajq2g2mUxW8zxjwR7ft+AvLNYTpnDKqEelgZjvRkrlM6oIi4MKZ8/3xIW9Jz4AeZ2m+NwFbubSAp7VhmXzGWWEcOgd2z/E23z/cHDsiU+lrZj9HCQdZ9TtAY8q94BxsN13/thDqyvNFPO9Ask4o3Aff1V+YFXhFAJFrNwKx/1thaexwISvpH+rTt1ZjDSNFoYhRsEMih8AZqWBmsamZXUoCRqfvtBEmI5Uf5OuHtgud7qMWLvl8zT+XDhOg8rfQt70fvfnsocaJMxuWvGT1SaKos3qflhVDd0dK0rCiGsz21a2oj31wyh5wvPBFZ9rg9UH1oQeHD/XVv4s2eu79myiJXwJsoSWsP2SIpRN61shqXtmpLPeNgh8kyD8T8mDHhVL6t61S/kfoTYuOJQA7PWanY5vlaRuzkuN+OII4VIKsNf7peTHf9QJupeShL0fDe9UaYfIUBqw1/tZeeyljYIEvH6QB0z16zU596/FqVA8/P4EA3LdXrZfT6ezsrKysrKysrKysrKysuqQ/gerM59E1TzqcQAAAABJRU5ErkJggg=="
        rel="shortcut icon">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<style>
    body {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background-image: url('https://images.template.net/353862/Aesthetic-Grid-Pattern-Background-edit-online.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }
</style>

<body class="flex items-center justify-center">
    <div class=" border-blue-500 p-3 rounded-md border flex justify-between items-center bg-white">
        <a href="/">
            <div class="flex gap-3 items-center">
                <img src="./home.png" class="w-10 h-10 hover:scale-125 duration-300" alt="Leader ToolBox Logo">
            </div>
        </a>
    </div>
    <div class="bg-white p-8 border m-2 max-w-2xl w-full relative shadow-lg-transform">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-left">CSV Merger Tool</h1>

        <div class="mb-6">
            <label for="csvFiles" class="block text-sm font-medium text-gray-700 mb-2">Upload CSV Files</label>
            <input type="file" id="csvFiles" multiple accept=".csv"
                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
        </div>

        <div class="text-center">
            <button id="mergeBtn"
                class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-md font-bold transition w-full">
                Merge CSVs
            </button>
        </div>

        <div id="progressModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-bold mb-2 text-blue-600">Progress</h2>
                <p id="progressText" class="mb-4">Uploading files...</p>
                <div class="w-full bg-gray-200 rounded">
                    <div id="progressBar" class="bg-blue-600 h-2 rounded" style="width: 0;"></div>
                </div>
                <button id="closeModal"
                    class="mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition">Close</button>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('mergeBtn').addEventListener('click', mergeCSVFiles);
        document.getElementById('closeModal').addEventListener('click', closeModal);

        function mergeCSVFiles() {
            const files = document.getElementById('csvFiles').files;
            if (files.length === 0) {
                alert("Please select CSV files to merge.");
                return;
            }

            document.getElementById('progressModal').classList.remove('hidden');
            const progressText = document.getElementById('progressText');
            const progressBar = document.getElementById('progressBar');
            let totalFiles = files.length;
            let loadedFiles = 0;
            let mergedData = '';

            Array.from(files).forEach((file) => {
                const reader = new FileReader();

                reader.onload = function (e) {
                    const content = e.target.result.split('\n');
                    mergedData += content[0] + '\n';  // Keep the header
                    const body = content.slice(1).join('\n');
                    mergedData += body + '\n';

                    loadedFiles++;
                    updateProgress(loadedFiles, totalFiles);
                };

                reader.onerror = function () {
                    console.error("Error reading file:", file.name);
                };

                reader.readAsText(file);
            });

            const checkCompletion = setInterval(() => {
                if (loadedFiles === totalFiles) {
                    clearInterval(checkCompletion);
                    downloadCSV(mergedData);
                    closeModal();
                }
            }, 100);
        }

        function updateProgress(loadedFiles, totalFiles) {
            const progressText = document.getElementById('progressText');
            const progressBar = document.getElementById('progressBar');
            const percentage = (loadedFiles / totalFiles) * 100;
            progressBar.style.width = percentage + '%';
            progressText.textContent = `Uploaded ${loadedFiles} of ${totalFiles} files.`;
        }

        function downloadCSV(data) {
            const blob = new Blob([data], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'merged.csv';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function closeModal() {
            document.getElementById('progressModal').classList.add('hidden');
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('progressText').textContent = '';
        }
    </script>
</body>

</html>